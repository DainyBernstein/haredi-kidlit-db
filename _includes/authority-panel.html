<div id="authority-panel"></div>

<script>
  const term = decodeURIComponent(window.location.hash.slice(1));

  if (term) {
    fetch('{{ site.baseurl }}/assets/data/authority.json')
      .then(res => res.json())
      .then(data => {
        const match = data.find(row => row.name === term);
        if (!match) return;

        let html = `<div class="card mb-4 border-secondary"><div class="card-body">
          <h3 class="h5">${match.name}</h3><ul class="list-unstyled mb-2">`;

        if (match.lc) html += `<li>ğŸ“š <a href="${match.lc}" target="_blank">Library of Congress</a></li>`;
        if (match.nli) html += `<li>ğŸ‡®ğŸ‡± <a href="${match.nli}" target="_blank">National Library of Israel</a></li>`;
        if (match.viaf) html += `<li>ğŸŒ <a href="${match.viaf}" target="_blank">VIAF</a></li>`;
        if (match.wikidata) html += `<li>ğŸ§  <a href="${match.wikidata}" target="_blank">Wikidata</a></li>`;

        html += `</ul>`;
        if (match.notes) html += `<p class="text-muted small">${match.notes}</p>`;
        html += `</div></div>`;

        document.getElementById('authority-panel').innerHTML = html;
      });
  }
</script>
